@using InsaatFirmasi.Models
@model IEnumerable<Product>
@{
    var currentLang = Context.Request.Cookies["lang"] as string ?? "tr";

    var category = ViewBag.Category as Category;
    var defaultTitle = category != null
        ? (currentLang == "en" ? category.Name + " Products" : category.Name + " Ürünleri")
        : (currentLang == "en" ? "Products" : "Ürünler");
    var seoTitle = category != null && !string.IsNullOrEmpty(category.SeoTitle)
        ? category.SeoTitle
        : defaultTitle;
    var description = category?.SeoDescription
        ?? (currentLang == "en"
            ? $"Category: {category?.Name} products"
            : $"Kategori: {category?.Name} ürünleri");
    var keywords = category?.SeoKeywords
        ?? (currentLang == "en"
            ? $"{category?.Name}, products, construction, plastic solutions"
            : $"{category?.Name}, ürünler, inşaat, plastik çözümler");

    ViewData["Title"] = seoTitle;
    ViewData["Description"] = description;
    ViewData["Keywords"] = keywords;
    ViewData["OgTitle"] = seoTitle;
    ViewData["OgDescription"] = description;
}

<!-- SAYFA HERO -->
<section class="page-hero page-hero-simple">
    <div class="container-xl text-center">
        <h1 class="page-hero-title">
            @if (category != null)
            {
                @(currentLang == "en" ? category.Name + " Products" : category.Name + " Ürünleri")
            }
            else
            {
                @(currentLang == "en" ? "Products" : "Ürünler")
            }
        </h1>
    </div>
</section>

<section class="home-section product-list-section">
    <div class="container-xl">
        <div class="home-section-header">
            <span class="home-section-kicker">
                @(currentLang == "en" ? "Products" : "Ürünler")
            </span>
            <h2 class="home-section-title">
                @if (category != null)
                {
                    @(currentLang == "en"
                        ? $"Products in {category.Name} category"
                        : category.Name + " kategorisindeki ürünler")
                }
                else
                {
                    @(currentLang == "en"
                        ? "Products in the selected category"
                        : "Seçili kategorideki ürünler")
                }
            </h2>
        </div>

        @if (Model != null && Model.Any())
        {
            <div class="row g-4">
                @foreach (var product in Model)
                {
                    <div class="col-lg-4 col-md-6">
                        <a asp-controller="Product"
                           asp-action="Details"
                           asp-route-id="@product.Id"
                           class="text-decoration-none text-reset">
                            <div class="product-group-card">
                                <div class="product-group-image">
                                    @if (!string.IsNullOrEmpty(product.MainImagePath))
                                    {
                                        <img src="~/@product.MainImagePath" alt="@product.Name" />
                                    }
                                    else
                                    {
                                        <div class="d-flex align-items-center justify-content-center h-100 text-muted">
                                            <i class="fas fa-box-open fa-2x"></i>
                                        </div>
                                    }
                                </div>
                                <h3>@product.Name</h3>
                            </div>
                        </a>
                    </div>
                }
            </div>
        }
        else
        {
            <div class="text-center text-muted py-5">
                <i class="fas fa-box-open fa-3x mb-3"></i>
                <h4>Bu kategoride henüz ürün yok</h4>
                <p>Admin panelinden bu kategoriye ürün eklediğinizde burada listelenecektir.</p>
            </div>
        }
    </div>
</section>


