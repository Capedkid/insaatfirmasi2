@model InsaatFirmasi.Models.Product
@{
    var currentLang = Context.Request.Cookies["lang"] as string ?? "tr";
    var displayName = currentLang == "en" && !string.IsNullOrEmpty(Model.NameEn)
        ? Model.NameEn
        : Model.Name;
    var displayDescription = currentLang == "en" && !string.IsNullOrEmpty(Model.DescriptionEn)
        ? Model.DescriptionEn
        : Model.Description;

    var seoTitle = !string.IsNullOrEmpty(Model.SeoTitle) ? Model.SeoTitle : displayName;
    var baseDescription = Model.SeoDescription ?? displayDescription;
    var description = baseDescription != null && baseDescription.Length > 160
        ? baseDescription.Substring(0, 160) + "..."
        : baseDescription;
    var keywords = !string.IsNullOrEmpty(Model.SeoKeywords)
        ? Model.SeoKeywords
        : $"{displayName}, {Model.Category?.Name}, inşaat malzemeleri, {Model.Tags}";

    ViewData["Title"] = seoTitle;
    ViewData["Description"] = description;
    ViewData["Keywords"] = keywords;
    ViewData["OgTitle"] = seoTitle;
    ViewData["OgDescription"] = description;
}

<!-- SAYFA HERO (site tasarımı ile uyumlu) -->
<section class="page-hero page-hero-simple">
    <div class="container-xl text-center">
        <h1 class="page-hero-title">
            @{
                var categoryName = Model.Category != null && currentLang == "en" && !string.IsNullOrEmpty(Model.Category.NameEn)
                    ? Model.Category.NameEn
                    : Model.Category?.Name;
            }
            @categoryName ?? displayName
        </h1>
    </div>
</section>

<!-- Ürün Detayları (sade görünüm) -->
<section class="home-section">
    <div class="container-xl">
        <div class="row g-5 align-items-start">
            <!-- Ürün Görseli -->
            <div class="col-lg-6">
                <div class="position-relative">
                    @if (!string.IsNullOrEmpty(Model.MainImagePath))
                    {
                        <img src="~/@Model.MainImagePath"
                             class="img-fluid rounded shadow-sm"
                             alt="@Model.Name"
                             style="height: 400px; width: 100%; object-fit: cover;">
                    }
                    else
                    {
                        <div class="bg-light d-flex align-items-center justify-content-center rounded shadow-sm"
                             style="height: 400px;">
                            <i class="fas fa-image fa-4x text-muted"></i>
                        </div>
                    }
                </div>
            </div>

            <!-- Ürün Adı ve Açıklama / Stok Bilgisi -->
            <div class="col-lg-6">
                <div class="product-info">
                    <h1 class="display-5 fw-bold text-dark mb-3">@displayName</h1>
                    @if (!string.IsNullOrWhiteSpace(displayDescription))
                    {
                        <p class="lead text-muted mb-3">
                            @displayDescription
                        </p>
                    }

                    <div class="mt-3">
                        @if (Model.IsInStock)
                        {
                            <span class="badge bg-success px-3 py-2">Stokta var</span>
                        }
                        else
                        {
                            <span class="badge bg-secondary px-3 py-2">Stokta yok</span>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
